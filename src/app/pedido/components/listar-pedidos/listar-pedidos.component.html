<div class="contenedor-filtros">
  <div class="barra-busqueda">
    <div class="input-busqueda">
      <span class="icono-busqueda">üîç</span>
      <input type="text" (input)="onBusquedaChange($event)" placeholder="Buscar por producto"
        class="input-texto" />
    </div>

    <div class="filtros-select">
      <select (change)="onEstadoChange($event)" class="select-filtro">
        <option value="">Todos los estados</option>
        <option value="realizado">Realizado</option>
        <option value="no-realizado">No Realizado</option>
      </select>
    </div>
  </div>
</div>

<div>
  <table>
    <thead>
      <th class="columna-id">Id</th>
      <th class="columna-fecha">Fecha</th>
      <th class="columna-producto">Producto</th>
      <th class="columna-cantidad">Cantidad</th>
      <th class="columna-proveedor">Proveedor</th>
      <th class="columna-modificar">Modificar</th>
      <th class="columna-realizado">Realizado</th>
    </thead>
    <tbody>
      @if (pedidosFiltrados.length === 0) {
      <tr>
        <td colspan="7" class="sin-resultados">
          No se encontraron pedidos que coincidan con los filtros
        </td>
      </tr>
      }
      @for (pedido of pedidosFiltrados; track $index) {
      <tr>
        <td>{{ pedido.id }}</td>
        <td>{{ pedido.fecha }}</td>
        <td>{{ pedido.producto }}</td>
        <td>{{ pedido.cantidad }}</td>
        <td>{{ pedido.proveedor }}</td>
        <td>
          @if (pedido.estado == false ) {
          <button class="modificar" [routerLink]="['/modificar-pedido', pedido.id]" [state]="{user}">
            Modificar
          </button>
          }
        </td>
        <td>
          @if (user.tipo === 'admin') {
          @if (pedido.estado == false) {
          <button class="realizar-a" (click)="pedidoRealizado(pedido.id)">
            No Realizado
          </button>
          } @else {
          <button class="noRealizar-a">Realizado</button>
          }
          } @else if (user.tipo === 'base') {
          @if (pedido.estado == false) {
          <button class="realizar-b">No Realizado</button>
          } @else {
          <button class="noRealizar-b">Realizado</button>
          }
          }
        </td>
      </tr>
      }
    </tbody>
  </table>

  <div class="info-resultados">
    <span>Mostrando {{ pedidosFiltrados.length }} de {{ listaPedidos.length }} pedidos</span>
  </div>
</div>
